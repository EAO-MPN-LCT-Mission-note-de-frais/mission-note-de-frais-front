<div class="mission-type-container">
  <div class="title-bar">
    <button mat-icon-button (click)="returnHome()" aria-label="Retour à la page d'accueil">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1 style="display: inline-block;">Natures de mission</h1>
  </div>

  <p *ngIf="errorMessage" class="text-danger">{{ errorMessage }}</p>
  <a routerLink="/mission-type/new" class="btn btn-primary mb-3">Ajouter un Type</a>

  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

    <ng-container matColumnDef="label">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Libellé</th>
      <td mat-cell *matCellDef="let element">{{ element.label }}</td>
    </ng-container>

    <ng-container matColumnDef="isCharged">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Facturé</th>
      <td mat-cell *matCellDef="let element">{{ element.isCharged ? 'Oui' : 'Non' }}</td>
    </ng-container>

    <ng-container matColumnDef="isBonus">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Prime</th>
      <td mat-cell *matCellDef="let element">{{ element.isBonus ? 'Oui' : 'Non' }}</td>
    </ng-container>

    <ng-container matColumnDef="tjm">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>TJM</th>
      <td mat-cell *matCellDef="let element">{{ element.tjm }}</td>
    </ng-container>

    <ng-container matColumnDef="bonusPercentage">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>% Prime</th>
      <td mat-cell *matCellDef="let element">{{ element.bonusPercentage }}%</td>
    </ng-container>

    <ng-container matColumnDef="startDate">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Début</th>
      <td mat-cell *matCellDef="let element">{{ element.startDate | date:'dd/MM/yyyy' }}</td>
    </ng-container>

    <ng-container matColumnDef="endDate">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fin</th>
      <td mat-cell *matCellDef="let element">{{ element.endDate | date:'dd/MM/yyyy' }}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item [routerLink]="['/mission-type', element.id, 'edit']">Modifier</button>
          <button mat-menu-item (click)="deleteMissionType(element.id)">Supprimer</button>
        </mat-menu>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
</div>